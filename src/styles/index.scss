@import 'mathsass';

@import './include/base';

// TODO Refactor this. Works for now though.

.pt-2 {
  padding-top: 0.5rem;
}
.pt-3 {
  padding-top: 0.75rem;
}
.pt-4 {
  padding-top: 1rem;
}

.rectangle {
  $padding: 1rem;
  padding: $padding;
  margin: 0 (-1 * $padding);

  font-size: 19pt;
  font-weight: 600;

  &.is-green {
    background-color: $palette-green;
    color: $color-bright-text;
  }
}

.hero {
  margin-bottom: 2rem;

  &__section {
    margin-bottom: 0.5rem;
    &:last-of-type {
      margin-bottom: inherit;
    }
  }
}

.action {
  max-width: 600px;

  background-color: white;

  border: 2px solid rgb(228, 228, 228);
  border-left: none;
  border-right: none;
  font-size: 15.5pt;
  line-height: 1.325;

  &__button {
    cursor: pointer;
    user-select: none;

    display: flex;
    flex-direction: row;
    align-items: center;

    &:hover {
      background-color: rgb(250, 250, 250);
    }

    &__name {
      flex: 1;
      margin-right: 1rem;
    }

    &__icon {
      flex: 0;
      padding: 0 0.5rem;
    }
  }

  &__button,
  &__content,
  &-note {
    padding: 1rem 1rem;
  }

  &-note {
    font-size: 10pt;
  }
}

.spoiler {
  &__checkbox,
  &__content {
    display: none;
  }

  &__checkbox:checked + .action__button {
    color: rgb(112, 112, 112);

    .icon-plus::before {
      width: 0;
    }
  }

  &__checkbox:checked + .action__button + &__content {
    display: inherit;
  }

  &__content p {
    margin-bottom: 1.25rem !important;
  }
}

.link {
  a {
    display: flex;
    text-decoration: none;
    color: black;
  }
}

.asterisk {
  $color-asterisk: rgb(116, 116, 116);

  &-source::after,
  &-destination::before {
    content: '*';
    color: $color-asterisk;
  }
  &-source::after {
    padding-left: 4px;
  }
  &-destination::before {
    padding-right: 4px;
  }
}

.icon-plus {
  $size: 14pt;
  $tickness: 2px;

  width: $size;
  height: $size;
  position: relative;
  display: block;

  margin-bottom: 1px;

  &::before,
  &::after {
    content: '';
    position: absolute;
    width: $size;
    height: $tickness;
    background-color: black;
    top: 50%;
    margin: auto;
  }

  &::before {
    transform: rotate(90deg);
  }
}

.slanted-shadow {
  position: relative;

  $excess-width: 100vw;

  &__content::before {
    content: '';
    position: absolute;
    left: -$excess-width;
    width: 100vw + (2 * $excess-width);
    height: 100%;
    transform-origin: 0 0;
    background-color: whitesmoke;
    pointer-events: none;
    z-index: -100;
  }

  @mixin slanted-transform($angle, $width) {
    // The negative top property moves the background rectangle up,
    // which is necessary because its origin (top-left corner of the rectangle)
    // starts to the left of the screen (not visible to the user).
    // Since it is angled, the visible part will start lower than intended.
    // The offset by which the rectangle needs to moved upwards
    // can be calculated with simple trigonometry:
    //   tan(angle) = opposite / adjacent
    // The angle is at the top-left, the opposite leg is the wanted offset
    // and the adjacent leg of the triangle is equal to the excess width.
    top: tan($angle) * -$width;
    transform: rotate($angle);
  }

  // PostCSS will remove the style definitions that are unused.
  @for $i from 1 through 9 {
    $slant-angle: $i * 1deg;

    &.is-rising.is-#{$i} &__content::before {
      @include slanted-transform(-$slant-angle, $excess-width);
    }
    &.is-falling.is-#{$i} &__content::before {
      @include slanted-transform($slant-angle, $excess-width);
    }
  }

  &.is-yellow &__content::before {
    // background-color: rgb(255, 251, 236);
    background-color: rgb(240, 255, 252);
    // background-color: adjust-color(
    //   $color: $palette-yellow,
    //   $lightness: -10%,
    //   $alpha: -0.82
    // );
  }

  &.is-blue &__content::before {
    // background-color: $palette-blue-faint;
    background-color: adjust-color(
      $color: $palette-blue,
      $lightness: +10%,
      $alpha: -0.9
    );
  }

  &.is-green &__content::before {
    background-color: adjust-color(
      $color: $palette-green,
      $lightness: +10%,
      $alpha: -0.9
    );
  }
}

.course-list {
  list-style-type: none;
  font-size: 15pt;
  line-height: 1.3;
  padding: 0.2rem 0;
  padding-left: 0.5rem;

  li {
    margin-bottom: 0.7rem;
  }
}
